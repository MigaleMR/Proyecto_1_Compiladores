let
  var i: Integer;
  var arrayA: array 4 of Integer;
  var f: lambda(x: Integer): Integer;

  proc print(var arrayA: array 4 of Integer, var i: Integer) ~
     begin
       for i:= 0 to 3 do
         putint(arrayA[i]);
     end;

  proc map(func f (x: Integer): Integer, var arrayA: array 4 of Integer, 
           var i: Integer) ~
     begin
       for i:= 0 to 3 do
         arrayA[i]:= f(arrayA[i], 2);
     end
in
  begin
    i := 0;
    arrayA[0]:= 1; arrayA[1]:= 2;
    arrayA[2]:= 3; arrayA[3]:= 4;
    f:= lambda(x: Integer): Integer ~ x * 2;

    map(f, var arrayA, var i);
    print(var arrayA, var i)
  end